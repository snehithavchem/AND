<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Letter Verification</title>
</head>
<body>
<h2>Letter Verification</h2>
<div id="result">Checking...</div>

<script>

async function main() {

    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");

    if (!id) {
        document.getElementById("result").innerHTML =
            "<h3>Invalid verification link</h3>";
        return;
    }

    const response = await fetch("letters.json");
    const data = await response.json();

    if (data[id] && data[id].status === "valid") {
        document.getElementById("result").innerHTML = `
            <h3 style="color:green;">✔ VALID LETTER</h3>
            <p><strong>Letter ID:</strong> ${id}</p>
            <p><strong>Recipient:</strong> ${data[id].recipient}</p>
            <p><strong>Date:</strong> ${data[id].date}</p>
            <p><strong>Issuer:</strong> ${data[id].issuer}</p>
        `;
    } else {
        document.getElementById("result").innerHTML =
            "<h3 style='color:red;'>✘ LETTER NOT FOUND</h3>";
    }
}

main();

</script>
</body>
</html>
